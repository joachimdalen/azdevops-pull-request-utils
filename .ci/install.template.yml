parameters:
  - name: nodeVersion
    default: '10.21.0'

steps:
  - task: NodeTool@0
    displayName: 'Install node'
    inputs:
      versionSpec: ${{ parameters.nodeVersion }}
  - task: Cache@2
    displayName: Cache npm
    inputs:
      key: 'npm | "$(Agent.OS)" | $(Build.SourcesDirectory)/package-lock.json'
      path: '$(npm_config_cache)'
  - task: Npm@1
    displayName: 'Install dependencies'
    inputs:
      command: ci
  - task: Bash@3
    displayName: 'Bootstrap Project'
    inputs:
      targetType: 'inline'
      script: 'npx lerna bootstrap'
